Урок 2. Внешние факторы и стабильность работы приложения

1. Сеть (Wi-Fi, 2G-5G, офлайн-режимы)
Нужно проверить, как приложение ведет себя при работе с разными типами соединений (2G, 3G, 4G, 5G и Wi-Fi), что происходит при потере 
сети и восстановлении подключения, а также как реализован офлайн-режим.
1.1. Особенности работы с сетью в iOS
Переход между Wi-Fi и мобильными данными происходит автоматически.
Даже если приложение находится в фоне, оно может получить обновления.
Ошибки сетевых запросов обрабатываются через тип NSURLError. 
1.2. Особенности работы с сетью в Android
Глобально Android предоставляет разработчикам больше контроля над сетевыми событиями, чем iOS. 
Поэтому поведение часто зависит от версии ОС и оболочки. 

Что проверять при тестировании
- Переключение между Wi-Fi и мобильной сетью
В этот момент приложение должно сохранить активную сессию, обрабатывать таймауты и корректно продолжить выполнение запросов. 
- Потеря сети
Приложение должно показать понятное сообщение «Нет соединения» и предложить повторить действие после восстановления сети.
- Офлайн-режим
Некоторые приложения должны оставаться полезными без доступа к интернету и синхронизироваться автоматически 
после восстановления соединения.

2. Геопозиция: тестирование и подмена местоположения
Современные версии систем дают пользователю больше контроля
В Android можно выбрать точность: «Точно» или «Приблизительно», а также уровень доступа: 
в любом режиме, при использовании приложения, однократно или запрет.
В iOS пользователь может активировать режим «Точная геопозиция», а также выбрать уровень доступа: 
«Никогда», «Спросить в следующий раз или когда я делюсь геопозицией», 
«При использовании приложения» или «При использовании приложения или виджетов».
Это значит, что нужно проверять весь спектр сценариев.
2.1. Первый запуск и разрешения
Нужно проверить все варианты: согласие, отказ, выбор «однократно».
Важно убедиться, что отсутствие разрешений не приводит к ошибкам и падениям. 
Типичные ошибки: приложение не функционально при отсутствии разрешения, нет подсказки о том, как включить доступ.
2.2. Отсутствие сигнала
Приложение должно показывать уведомление о проблеме и попытке переподключения. 
Типичные ошибки: бесконечный индикатор загрузки, сброс активных заказов в сервисах доставки или такси
2.3. Работа в фоне
Приложения должны продолжать отслеживание координат после сворачивания
Типичные ошибки: прерывание записи маршрута, остановка навигации при сворачивании, сброс таймера тренировки
2.4. Переключение сетей
При переключении возможны скачки координат, задержки обновления или кратковременные сбои. 
Приложение должно сглаживать изменения (переходы) и корректно обновлять данные. 
Типичные ошибки: маршрут сбрасывается, точка «телепортируется» в другое место, заказ в доставке теряет правильный адрес.

3. Прерывания: звонки, сообщения, уведомления и другие системные события, которые временно выводят приложение из фокуса или 
блокируют часть интерфейса.  
3.1. Входящий звонок
Приложение должно корректно уйти в фоновый режим, приостановить активные процессы (видео, аудио, загрузки) и без ошибок вернуться 
в рабочее состояние после завершения разговора.
Типичные баги прерывания: форма ввода очищается, видеоплеер остается на паузе или перестает работать, приложение «зависает»
3.2. Видеозвонок и VoIP
Видеозвонки конкурируют за доступ к камере, микрофону и динамикам.
Важно, чтобы после завершения видеозвонка приложение вернуло себе доступ к мультимедиа и продолжило работу. 
Частые баги: камера остается недоступной, аудио не восстанавливается
3.3. Уведомления
класс прерываний, который влияет и на UX, и на логику приложения.
Делятся три типа: push (удаленные), локальные и системные. 
- Push-уведомления приходят от серверов приложений, должны корректно обрабатываться в любых сценариях: 
в фоне, при активной работе, при заблокированном экране. 
Как работают push-уведомления
APNs (для iOS) и FCM (для Android и кросс-платформенных приложений) — сервисы, которые выступают в роли посредников между 
вашим сервером и устройством пользователя. 
APNs (Apple Push Notification Service) — сервис доставки уведомлений для iOS
FCM (Firebase Cloud Messaging) - для Android
APNs и FCM создают токены, которые привязываются к пользователю. Токен отправялется серверу. 
Когда возникает необходимость, сервер отправляет запрос к APNs/FCM, которые доставляют пуш на устройство.
- Локальные уведомления создаются самим приложением: прием лекарства, завершениt таймера. 
Что важно проверять: уведомления появляются строго в заданное время, корректная работа при множественных и повторяющихся уведомлениях
Типичные проблемы: напоминание не срабатывает, появляются дубли
- Системные уведомления — это события от самой ОС: низкий заряд батареи, смена сети, переход в авиарежим и прочие.
Типичные проблемы: потеря соединения без попытки восстановления, бесконечный индикатор загрузки, блокировка экрана

4. СМС и сообщения в мессенджерах
Приложение должно корректно обрабатывать подобные вмешательства и сохранять состояние ввода.
Интерфейс обязан восстановиться в том же состоянии.
Типичные проблемы: клавиатура скрывается и больше не появляется, введенный текст теряется

5. Будильник и таймер
После отключения или повтора будильника пользователь должен вернуться в приложение без артефактов.
Типичные проблемы: 